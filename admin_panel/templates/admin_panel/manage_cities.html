{% extends "base_admin.html" %}

{% block title %}Manage Cities{% endblock %}

{% block page_title %}Manage Cities{% endblock %}

{% block content %}

<!-- Messages -->
{% if messages %}
{% for message in messages %}
{% if message.tags == 'success' %}
<div style="padding:1rem; margin-bottom:1rem; border-radius:8px; background:#d1fae5; color:#065f46;">
    <i class="fas fa-check-circle"></i> {{ message }}
</div>
{% else %}
<div style="padding:1rem; margin-bottom:1rem; border-radius:8px; background:#fee2e2; color:#991b1b;">
    <i class="fas fa-exclamation-circle"></i> {{ message }}
</div>
{% endif %}
{% endfor %}
{% endif %}

<!-- Add City Form -->
<div class="card-box" style="margin-bottom:2rem;">
    <h5 style="margin-bottom:1rem; color:var(--primary-navy);">
        <i class="fas fa-plus-circle"></i> Add New City
    </h5>
    <form method="POST" style="display:flex; gap:1rem; align-items:end;">
        {% csrf_token %}
        <input type="hidden" name="action" value="add">
        <div style="flex:1;">
            <label style="display:block; margin-bottom:0.5rem; font-weight:500;">City Name</label>
            <input type="text" name="name" class="form-control" placeholder="e.g., Lahore" required>
        </div>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add City
        </button>
    </form>
</div>

<!-- Cities List -->
<div class="card-box">
    <h5 style="margin-bottom:1.5rem; color:var(--primary-navy);">
        <i class="fas fa-city"></i> All Cities ({{ cities.count }})
    </h5>

    <table class="table">
        <thead>
            <tr>
                <th>City Name</th>
                <th style="width:200px; text-align:right;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for city in cities %}
            <tr>
                <td>
                    <form method="POST" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="edit">
                        <input type="hidden" name="city_id" value="{{ city.id }}">
                        <input type="text" name="name" value="{{ city.name }}"
                            style="border:1px solid #e5e7eb; padding:0.5rem; border-radius:6px; width:300px;">
                        <button type="submit" class="btn btn-sm btn-success">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </form>
                </td>
                <td style="text-align:right;">
                    <form method="POST" style="display:inline;" onsubmit="return confirm('Delete this city?');">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="delete">
                        <input type="hidden" name="city_id" value="{{ city.id }}">
                        <button type="submit" class="btn btn-sm btn-danger">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="2" style="text-align:center; color:#6b7280; padding:2rem;">
                    No cities added yet
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}